(function(a){a.fn.fadeGallery=function(){a(this).each(function(){if(!a(this).is("a")){throw"Passed collections must be <a/> element.";return false}if(a(this).find("img").length==0){throw"Passed a elements must contain <img/>(thumbnail) element.";return false}});var h=arguments[0]||{};h.target=h.target||false;h.thumbSize=parseInt(h.thumbSize)||50;h.borderColor=h.borderColor||"#830113";if(!h.target){throw"Target div must be defined.";return false}if(a.isFunction(a.loadImages)!=true){throw"Jquery.loadImages must be loaded first.";return false}var d=0;var f=a("#"+h.target);var b=a("<div/>").css("position","relative");var n=a("<img/>").css("display","block").appendTo(b);var g=a(this);var o=a('<div class="selected"/>').css({position:"absolute",top:"0px",left:"0px",width:h.thumbSize-8+"px",height:h.thumbSize-8+"px",border:"4px solid "+h.borderColor});var c=a('<div class="loading"/>').css({position:"absolute"});var m=a("<div/>").css({position:"absolute",top:"0px",left:"0px",background:"#000",opacity:0.6});var k=a('<div class="holder"/>').css({"float":"left","margin-bottom":"2px","margin-right":"2px",width:h.thumbSize+"px",height:h.thumbSize+"px",display:"block",background:"#141414"});m.timer=null;g.each(function(p,q){a(this).css({opacity:0.5,position:"relative",width:h.thumbSize+"px",height:h.thumbSize+"px","float":"left","margin-bottom":"2px","margin-right":"2px"});a(this).find("img").css({width:h.thumbSize+"px",height:h.thumbSize+"px",border:"none"})});var e=Math.floor(g.parent().width()/(h.thumbSize+2));var l=e-(g.length%e);if(l>0){for(d=0;d<l;d++){g.parent().append(k.clone())}}g.parent().append('<div style="clear:both"/>');f.append(b);n.appendTo(b);function j(i){if(!i.hasClass("selected")){var p=i.attr("href");clearTimeout(m.timer);m.css({width:n.width()+"px",height:n.height()+"px",opacity:0}).appendTo(b);m.stop(true).animate({opacity:0.7},300);m.timer=setTimeout(function(){a.loadImages([p],function(){c.remove();n.attr("src",p);m.stop(true).animate({opacity:0},300,function(){m.remove()})})},300);b.append(c);g.removeClass("selected").css("opacity",0.5);i.addClass("selected").css("opacity",1).prepend(o)}}g.hover(function(){if(a(this).hasClass("selected")==false){a(this).stop(true).animate({opacity:1},300)}},function(){if(a(this).hasClass("selected")==false){a(this).stop(true).animate({opacity:0.5},500)}});g.click(function(){j(a(this));return false});j(g.first())}})(jQuery);