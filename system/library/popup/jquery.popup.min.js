$.fn.popup=function(){var d=$(this);var j=arguments[0]||{};j.overlayColor=j.overlayColor||"#000000";j.overlayOpacity=j.overlayOpacity||0.7;j.width=j.width||0;var f=$("<div/>");var g=$("<div/>");var b=$("<div/>");var m=$("<div/>");var a={};a.left=$("<div/>").addClass("popup-nav-left");a.right=$("<div/>").addClass("popup-nav-right");a.x=$("<div/>").addClass("popup-nav-x");var e=[];d.each(function(){var i=$(this);i.width($(this).width());e.push(i);$(this).remove()});var h=0;var l=0;f.on=function(){this.addClass("popup-loading");return this};f.off=function(){this.removeClass("popup-loading");return this};a.show=function(){this.left.css("display","block");this.right.css("display","block");this.x.css("display","block")};a.hide=function(){this.left.css("display","none");this.right.css("display","none");this.x.css("display","none")};b.show=function(n){l=n!=null?n:0;$("body").css("position","relative");var p=k();var i=c();var p=k();var o=j.width!=0?j.width:e[l].width();b.css({position:"absolute",width:o+"px",top:p[1]+(i[3]/10)+"px",left:p[0]+((i[0]-o)/2)+"px",background:"#ffffff","z-index":99999}).addClass("popup");g.css({position:"fixed",top:"0px",left:"0px",margin:"0px",padding:"0px",width:i[0],height:i[1],opacity:j.overlayOpacity,background:j.overlayColor,"z-index":99998});a.hide();g.css({opacity:0});g.appendTo("body");g.stop(true).animate({opacity:j.overlayOpacity},300);b.css({opacity:0});b.empty();b.appendTo("body");b.stop(true).delay(200).animate({opacity:1},300,function(){a.right.click(function(){l++;if(l>=e.length){l=0}b.play(l)});a.left.click(function(){l--;if(l<0){l=e.length-1}b.play(l)});a.x.click(function(){b.hide()});g.click(function(){b.hide()});b.play(l)})};b.empty=function(){m.empty()};b.hide=function(){l=0;b.remove();g.remove()};b.play=function(n){n=parseInt(n);m.stop(true).animate({opacity:0},200,function(){m.empty();m.append(e[n]);m.stop(true).animate({opacity:1},200,function(){a.show()})})};function c(){var o,i;if(window.innerHeight&&window.scrollMaxY){o=window.innerWidth+window.scrollMaxX;i=window.innerHeight+window.scrollMaxY}else{if(document.body.scrollHeight>document.body.offsetHeight){o=document.body.scrollWidth;i=document.body.scrollHeight}else{o=document.body.offsetWidth;i=document.body.offsetHeight}}var n,p;if(self.innerHeight){if(document.documentElement.clientWidth){n=document.documentElement.clientWidth}else{n=self.innerWidth}p=self.innerHeight}else{if(document.documentElement&&document.documentElement.clientHeight){n=document.documentElement.clientWidth;p=document.documentElement.clientHeight}else{if(document.body){n=document.body.clientWidth;p=document.body.clientHeight}}}if(i<p){pageHeight=p}else{pageHeight=i}if(o<n){pageWidth=o}else{pageWidth=o}arrayPageSize=new Array(pageWidth,pageHeight,n,p);return arrayPageSize}function k(){var n,i;if(self.pageYOffset){i=self.pageYOffset;n=self.pageXOffset}else{if(document.documentElement&&document.documentElement.scrollTop){i=document.documentElement.scrollTop;n=document.documentElement.scrollLeft}else{if(document.body){i=document.body.scrollTop;n=document.body.scrollLeft}}}arrayPageScroll=new Array(n,i);return arrayPageScroll}m.appendTo(b);f.appendTo(b);a.hide();a.left.css({cursor:"pointer"});a.left.appendTo(b);a.right.css({cursor:"pointer"});a.right.appendTo(b);a.x.css({cursor:"pointer"});a.hide();a.x.appendTo(b);$(window).resize(function(){var i=c();var o=k();var n=j.width!=0?j.width:e[l].width();g.css({width:i[0],height:i[1]});b.css({top:o[1]+(i[3]/10)+"px",left:o[0]+((i[0]-n)/2)+"px"})});return b};