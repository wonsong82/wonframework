(function(a){a.fn.hashAjax=function(){var f=a(this);var d=(window.location.hash).replace("#","");var c=false;if(f.length<1){throw"A element(s) must be handed.";return false}f.each(function(){if(!a(this).is("a")){throw"Passed elements must be a elements.";return false}if(!a(this).attr("hash")){throw"Passed elements must contain 'hash' attributes.";return false}});var b=arguments[0]||{};b.callback=b.callback||function(){};b.loadingOn=b.loadingOn||function(){};b.loadingOff=b.loadingOff||function(){};function e(i){if(c){c=false;return false}var h=false;f.each(function(){if(a(this).attr("hash")==i){var j=a(this).attr("href");b.loadingOn();a.ajax({url:a(this).attr("href"),cache:false,async:true,type:"post",data:{},success:function(k){b.loadingOff();b.callback(k)}});h=true;d=i;return false}});if(!h){c=true;window.location.hash=d}return false}window.addEventListener("hashchange",function(){var h=(window.location.hash).replace("#","");e(h);return false});f.click(function(){window.location.hash=a(this).attr("hash");return false});if(d!=""){e(d)}var g={};g.refreshElements=function(h){f=h;f.click(function(){window.location.hash=a(this).attr("hash");return false})};return g}})(jQuery);